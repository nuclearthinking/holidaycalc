{"version":3,"sources":["components/Header.js","feature/groups/groupsSlice.js","components/HelperAllert.js","components/PartyConfiguration.js","App.js","store.js","index.js"],"names":["Header","groupsSlice","createSlice","name","initialState","groups","payments","reducers","addGroup","state","action","push","payload","addPerson","id","find","group","persons","nanoid","drinksAlcohol","eatMeat","addSpending","spendings","amount","type","changePersonName","person","findPerson","toggleDrinksAlcohol","toggleEatMeat","changeSpendingAmount","spending","findSpending","changeSpendingType","addPayments","data","length","pop","p","actions","HelperAlert","useState","show","setShow","useSelector","storage","useEffect","className","role","xmlns","width","height","fill","viewBox","d","PartyConfiguration","modalShow","setModalShow","groupName","setGroupName","groupNameState","setGroupNameState","dispatch","useDispatch","handleCloseModal","map","i","Group","style","marginTop","onClick","Calculate","CalculationResults","Modal","onHide","closeButton","Title","Body","placeholder","value","onChange","e","target","Footer","setTimeout","props","icon","faPlusCircle","color","Person","Spending","checked","htmlFor","fetch","method","headers","body","JSON","stringify","eventName","participants","then","response","ok","json","console","error","catch","disabled","PaymentRow","payer","recepient","faArrowRight","marginLeft","marginRight","faRubleSign","size","App","routes","path","element","Layout","children","index","useRoutes","configureStore","reducer","ReactDOM","render","store","document","getElementById"],"mappings":"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","file":"static/js/main.36be44cd.chunk.js","sourcesContent":["export default function Header() {\n\n    return <div/>\n\n\n    //\n    // <nav className=\"navbar navbar-light bg-light\" style={{marginBottom: 10}}>\n    //     <div className=\"container-fluid\">\n    //         <form className=\"d-flex\">\n    //             <input className=\"form-control me-2\" type=\"search\" placeholder=\"url\" aria-label=\"Search\" disabled={true}/>\n    //             <button className=\"btn btn-outline-dark\" type=\"button\">share</button>\n    //         </form>\n    //     </div>\n    // </nav>\n}","import {createSlice, nanoid} from \"@reduxjs/toolkit\"\n\nconst initialState = {\n    groups: [],\n    payments: [],\n}\n\nexport const groupsSlice = createSlice({\n    name: 'storage',\n    initialState: initialState,\n    reducers: {\n        addGroup(state, action) {\n            state.groups.push(action.payload)\n        },\n        addPerson(state, action) {\n            const {id} = action.payload\n            const group = state.groups.find(group => group.id === id)\n            group.persons.push({\n                id: nanoid(),\n                name: '',\n                drinksAlcohol: true,\n                eatMeat: true,\n            })\n        },\n        addSpending(state, action) {\n            const {id} = action.payload\n            const group = state.groups.find(group => group.id === id)\n            group.spendings.push({\n                id: nanoid(),\n                amount: '',\n                type: 'other'\n            })\n        },\n        changePersonName(state, action) {\n            const {id, name} = action.payload\n            let person = findPerson(id, state)\n            if (person != null) {\n                person.name = name\n            }\n        },\n        toggleDrinksAlcohol(state, action) {\n            const {id} = action.payload;\n            const person = findPerson(id, state)\n            if (person != null) {\n                person.drinksAlcohol = !person.drinksAlcohol\n            }\n        },\n        toggleEatMeat(state, action) {\n            const {id} = action.payload\n            const person = findPerson(id, state)\n            if (person != null) {\n                person.eatMeat = !person.eatMeat\n            }\n        },\n        changeSpendingAmount(state, action) {\n            const {id, amount} = action.payload\n            const spending = findSpending(id, state)\n            if (spending != null) {\n                spending.amount = amount\n            }\n        },\n        changeSpendingType(state, action) {\n            const {id, type} = action.payload\n            const spending = findSpending(id, state)\n            if (spending != null) {\n                spending.type = type\n            }\n        },\n        addPayments(state, action) {\n            const {data} = action.payload;\n            const payments = state.payments\n            if (!data) return\n            while (payments.length > 0){\n                payments.pop()\n            }\n            for (const p of data) {\n                payments.push(p)\n            }\n        }\n    }\n})\n\nfunction findPerson(id, state) {\n    let person = null\n    for (const group of state.groups) {\n        for (const person of group.persons) {\n            if (person.id === id) {\n                return person\n            }\n        }\n    }\n    return person\n}\n\nfunction findSpending(id, state) {\n    let spending = null\n    for (const group of state.groups) {\n        for (const spending of group.spendings) {\n            if (spending.id === id) {\n                return spending\n            }\n        }\n    }\n    return spending\n}\n\nexport const {\n    addGroup, addPerson, addSpending,\n    changePersonName, toggleDrinksAlcohol, toggleEatMeat,\n    changeSpendingAmount, changeSpendingType,\n    addPayments,\n} = groupsSlice.actions","import {useSelector} from 'react-redux'\nimport {useEffect, useState} from \"react\";\n\n\nexport default function HelperAlert() {\n    const [show, setShow] = useState(true)\n    const groups = useSelector(state => state.storage.groups)\n\n    useEffect(() => {\n        if (groups.length > 0) {\n            setShow(false)\n        } else {\n            setShow(true)\n        }\n    }, [groups])\n\n    if (show) {\n        return <div className=\"alert alert-primary d-flex alert-dismissible\" role=\"alert\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\"\n                 className=\"bi bi-exclamation-triangle-fill flex-shrink-0 me-2\" viewBox=\"0 0 16 16\" role=\"img\"\n                 aria-label=\"Warning:\">\n                <path\n                    d=\"M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z\"/>\n            </svg>\n            <div>\n                <ul>\n                    <li>Добавьте как минимум две группы участников</li>\n                    <li>Заполните траты и особенности участников</li>\n                    <li>Нажмите &#171;Посчитать&#187; и узнайте кто кому и сколько должен</li>\n                </ul>\n            </div>\n            <button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"alert\" aria-label=\"Close\"/>\n        </div>\n    }\n    return <div/>\n\n}","import {useDispatch, useSelector} from 'react-redux'\nimport {useEffect, useState} from 'react'\nimport {\n    addGroup,\n    addPerson,\n    addSpending,\n    changePersonName,\n    changeSpendingAmount,\n    changeSpendingType,\n    toggleDrinksAlcohol,\n    toggleEatMeat,\n    addPayments\n} from \"../feature/groups/groupsSlice\";\nimport {nanoid} from '@reduxjs/toolkit'\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome'\nimport {faPlusCircle, faRubleSign, faArrowRight} from '@fortawesome/free-solid-svg-icons'\nimport {Modal} from 'react-bootstrap'\nimport HelperAlert from \"./HelperAllert\";\n\nexport default function PartyConfiguration() {\n    const groups = useSelector(state => state.storage.groups)\n    const [modalShow, setModalShow] = useState(false)\n    const [groupName, setGroupName] = useState('')\n    const [groupNameState, setGroupNameState] = useState('empty')\n\n    const dispatch = useDispatch()\n\n\n    function onModalGroupNameChange(e) {\n        setGroupName(e.target.value)\n    }\n\n    const handleCloseModal = () => setModalShow(false)\n    const handleShowModal = () => setModalShow(true)\n\n    function addNewGroup() {\n        if (groupName.length >= 3) {\n            dispatch(addGroup({\n                id: nanoid(),\n                name: groupName,\n                persons: [],\n                spendings: [],\n            }))\n            setGroupNameState('empty')\n            setGroupName('')\n            setModalShow(false)\n        } else {\n            setGroupNameState('error')\n            setTimeout(() => {\n                setGroupNameState('empty')\n            }, 2000)\n        }\n    }\n\n    function getGroupNameInputClass() {\n        if (groupNameState === 'empty') {\n            return 'form-control form-control-lg'\n        } else {\n            return 'form-control form-control-lg is-invalid'\n        }\n    }\n\n    return <div className='container'>\n        <div className={'row justify-content-center'}>\n            <HelperAlert/>\n            {groups.map((group, i) => {\n                return <Group\n                    name={group.name}\n                    id={group.id}\n                    key={group.id}\n                    persons={group.persons}\n                    spendings={group.spendings}\n                />\n            })}\n            <div className={'row align-content-center'} style={{marginTop: 10}}>\n                <button type=\"button\" className=\"btn btn-success btn-lg\" onClick={handleShowModal}>\n                    Добавить группу\n                </button>\n            </div>\n            <Calculate/>\n            <CalculationResults/>\n            <Modal show={modalShow} onHide={handleCloseModal}>\n                <Modal.Header closeButton>\n                    <Modal.Title>Добавить новую группу</Modal.Title>\n                </Modal.Header>\n                <Modal.Body>\n                    <div className={'row justify-content-center'}>\n                        <div className={'col-1'}/>\n                        <div className={'col-auto'}>\n                            <input\n                                className={getGroupNameInputClass()}\n                                type=\"text\"\n                                placeholder=\"Введите название\"\n                                value={groupName}\n                                onChange={onModalGroupNameChange}\n                            />\n                        </div>\n                        <div className={'col-1'}/>\n                    </div>\n                </Modal.Body>\n                <Modal.Footer>\n                    <button type=\"button\" className=\"btn btn-secondary\" onClick={handleCloseModal}>Закрыть</button>\n                    <button type=\"button\" className=\"btn btn-primary\" onClick={addNewGroup}>Добавить</button>\n                </Modal.Footer>\n            </Modal>\n        </div>\n    </div>\n}\n\nfunction Group(props) {\n    const {id, name, persons, spendings} = props\n    const dispatch = useDispatch()\n\n\n    function addNewPerson() {\n        dispatch(addPerson({\n            id: id\n        }))\n    }\n\n    function addNewSpending() {\n        dispatch(addSpending({\n            id: id\n        }))\n    }\n\n    return (\n        <div className='container' style={{marginTop: 15}}>\n            <div className='row'>\n                <p className={'h3'}>{name}</p>\n            </div>\n            <div className={'row'}>\n                <div className={'col'}>\n                    <p className={'h6'}>Участники <FontAwesomeIcon icon={faPlusCircle} color={'green'}\n                                                                   onClick={addNewPerson}/></p>\n                </div>\n            </div>\n            <div className='row justify-content-center'>\n                {persons ? persons.map((person, i) => {\n                    return <Person\n                        name={person.name}\n                        drinksAlcohol={person.drinksAlcohol}\n                        eatMeat={person.eatMeat}\n                        id={person.id}\n                        key={person.id}\n                    />\n                }) : ''}\n            </div>\n            <div className={'row'} style={{marginTop: 5}}>\n                <div className={'col'}>\n                    <p className={'h6'}>Траты <FontAwesomeIcon icon={faPlusCircle} color={'green'}\n                                                               onClick={addNewSpending}/></p>\n                </div>\n            </div>\n            <div className='row justify-content-center'>\n                {spendings ? spendings.map((spending, i) => {\n                    return <Spending\n                        amount={spending.amount}\n                        type={spending.type}\n                        id={spending.id}\n                        key={spending.id}\n                    />\n                }) : ''}\n            </div>\n        </div>\n    )\n}\n\n\nfunction Person(props) {\n    const {id, name, eatMeat, drinksAlcohol} = props\n    const dispatch = useDispatch()\n\n    function onChangeName(e) {\n        dispatch(changePersonName({\n            id: id,\n            name: e.target.value,\n        }))\n    }\n\n    function onChangeDrinksAlcohol() {\n        dispatch(toggleDrinksAlcohol({id: id}))\n    }\n\n    function onChangeEatMeat() {\n        dispatch(toggleEatMeat({id: id}))\n    }\n\n    return (\n        <div className={'row align-content-center'}>\n            <div className={'row justify-content-center'}>\n                <div className={'col-md-12 col-lg-6'}>\n                    <div className=\"input-group flex-nowrap\">\n                        <span className=\"input-group-text\" id=\"name\"><i className=\"bi bi-person-circle\"/></span>\n                        <input type=\"text\" className=\"form-control\" placeholder=\"Имя\" value={name}\n                               onChange={onChangeName}/>\n                    </div>\n                </div>\n                <div className={'col-md-12 col-lg-6 align-self-center'}>\n                    <div className=\"form-check form-check-inline\">\n                        <input className=\"form-check-input\" type=\"checkbox\" id={id + ':alcoholCheckbox'}\n                               checked={drinksAlcohol}\n                               onChange={onChangeDrinksAlcohol}/>\n                        <label className=\"form-check-label\" htmlFor={id + ':alcoholCheckbox'}>Алкоголь</label>\n                    </div>\n                    <div className=\"form-check form-check-inline\">\n                        <input className=\"form-check-input\" type=\"checkbox\" id={id + \":meatCheckbox\"} checked={eatMeat}\n                               onChange={onChangeEatMeat}/>\n                        <label className=\"form-check-label\" htmlFor={id + \":meatCheckbox\"}>Мясо</label>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nfunction Spending(props) {\n    const {id, amount, type} = props\n    const dispatch = useDispatch()\n\n    function onChangeAmount(e) {\n        dispatch(changeSpendingAmount({\n            id: id,\n            amount: e.target.value,\n        }))\n    }\n\n    function onChangeType(e) {\n        dispatch(changeSpendingType({\n            id: id,\n            type: e.target.value,\n        }))\n    }\n\n    return (\n        <div className={'row'} style={{marginTop: 5}}>\n            <div className=\"input-group flex-nowrap\">\n                <input type=\"number\" className=\"form-control\" placeholder=\"Сумма\" value={amount}\n                       onChange={onChangeAmount}/>\n                <select className=\"form-select\" value={type} onChange={onChangeType}>\n                    <option value={'other'}>Другое</option>\n                    <option value={'alcohol'}>Алкоголь</option>\n                    <option value={'meat'}>Мясо</option>\n                </select>\n            </div>\n        </div>\n    )\n}\n\nfunction Calculate() {\n    const groups = useSelector(state => state.storage.groups)\n    const [show, setShow] = useState(false)\n\n    const dispatch = useDispatch()\n\n\n    function onClick() {\n        fetch('/calculator/calculate-spendings', {\n                method: 'POST',\n                headers: {'Content-Type': 'application/json'},\n                body: JSON.stringify({\n                    eventName: 'event',\n                    participants: groups,\n                })\n            }\n        ).then((response) => {\n            if (!response.ok) {\n                console.error('error')\n            } else {\n                return response.json()\n            }\n        }).then(data => {\n            dispatch(addPayments({data: data.payments}))\n        }).catch(function (error) {\n            console.error(error)\n        })\n\n    }\n\n    useEffect(() => {\n        if (groups.length >= 2) {\n            setShow(true)\n        }\n    }, [groups])\n\n\n    if (show) {\n        return <div className={'row align-content-center'} style={{marginTop: 10}}>\n            <button type=\"button\" className=\"btn btn-success btn-lg\" onClick={onClick}>\n                Посчитать\n            </button>\n        </div>\n    } else {\n        return <div className={'row align-content-center'} style={{marginTop: 10}}>\n            <button type=\"button\" className=\"btn btn-success btn-lg\"  disabled={true}>\n                Посчитать\n            </button>\n        </div>\n    }\n}\n\nfunction CalculationResults() {\n    const [show, setShow] = useState(false)\n    const payments = useSelector(state => state.storage.payments)\n\n    useEffect(() => {\n        if (payments) {\n            setShow(true)\n        } else {\n            setShow(false)\n        }\n    }, [payments])\n\n\n    if (show) {\n        return <div className={'container'} style={{marginTop: 20}}>\n            <div className={'row'}>\n                {payments.map((p, i) => {\n                    return <PaymentRow\n                        payer={p.payer}\n                        amount={p.amount}\n                        recepient={p.recepient}\n                    />\n                })}\n            </div>\n        </div>\n    } else {\n        return <div/>\n    }\n}\n\nfunction PaymentRow(props) {\n    return <div className={'row align-content-center'}>\n        <div className={'col-md-12 justify-content-center'}>\n            <p className={'h5 text-center'}>{props.payer}<FontAwesomeIcon\n                icon={faArrowRight} style={{marginLeft: 30, marginRight: 30}}/> {props.amount}<FontAwesomeIcon\n                icon={faRubleSign} size={'xs'}/> <FontAwesomeIcon\n                icon={faArrowRight} style={{marginLeft: 30, marginRight: 30}}/>{props.recepient}</p>\n        </div>\n    </div>\n}","import Header from \"./components/Header\";\nimport {Outlet, useRoutes} from \"react-router-dom\";\nimport PartyConfiguration from \"./components/PartyConfiguration\";\n\n\n\nexport default function App() {\n    let routes = [\n        {\n            path: \"/\",\n            element: <Layout/>,\n            children: [\n                {index: true, element: <PartyConfiguration/>},\n            ]\n        }\n    ];\n    let element = useRoutes(routes);\n\n    return (\n        <div>\n            {element}\n        </div>\n    );\n}\n\n\nfunction Layout(){\n    return <div className={'col-lg-8 mx-auto p-3 py-md-5'}>\n        <Header/>\n        <Outlet/>\n    </div>\n}\n","import {configureStore} from \"@reduxjs/toolkit\";\nimport {groupsSlice} from \"./feature/groups/groupsSlice\";\n\nexport default configureStore({\n    reducer: {\n        storage: groupsSlice.reducer,\n    }\n})\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport 'bootstrap/dist/js/bootstrap.bundle.min.js'\nimport 'bootstrap-icons/font/bootstrap-icons.css';\nimport {BrowserRouter as Router} from \"react-router-dom\";\nimport store from \"./store\";\nimport {Provider} from \"react-redux\";\n\nReactDOM.render(\n    <Provider store={store}>\n        <Router>\n            <App/>\n        </Router>\n    </Provider>,\n    document.getElementById('root')\n);\n"],"sourceRoot":""}