(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{41:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(10),s=n.n(a),r=(n(41),n(1));function i(){return Object(r.jsx)("div",{})}var o=n(3),l=n(5),d=n(9),j=n(11),u=n(15),b=Object(u.b)({name:"storage",initialState:{groups:[],payments:[]},reducers:{addGroup:function(e,t){e.groups.push(t.payload)},deleteGroup:function(e,t){var n=t.payload.id;e.groups=e.groups.filter((function(e){return e.id!==n}))},addPerson:function(e,t){var n=t.payload.id,c=e.groups.find((function(e){return e.id===n}));if(!c)return e;c.persons.push({id:Object(u.c)(),name:"",drinksAlcohol:!0,eatMeat:!0})},deletePerson:function(e,t){var n=t.payload.id,c=function(e,t){var n,c=Object(j.a)(t.groups);try{for(c.s();!(n=c.n()).done;){var a,s=n.value,r=Object(j.a)(s.persons);try{for(r.s();!(a=r.n()).done;){if(a.value.id===e)return s}}catch(i){r.e(i)}finally{r.f()}}}catch(i){c.e(i)}finally{c.f()}}(n,e);c.persons=c.persons.filter((function(e){return e.id!==n}))},addSpending:function(e,t){var n=t.payload.id;e.groups.find((function(e){return e.id===n})).spendings.push({id:Object(u.c)(),amount:"",type:"other"})},deleteSpending:function(e,t){var n=t.payload.id,c=function(e,t){var n,c=Object(j.a)(t.groups);try{for(c.s();!(n=c.n()).done;){var a,s=n.value,r=Object(j.a)(s.spendings);try{for(r.s();!(a=r.n()).done;){if(a.value.id===e)return s}}catch(i){r.e(i)}finally{r.f()}}}catch(i){c.e(i)}finally{c.f()}}(n,e);c.spendings=c.spendings.filter((function(e){return e.id!==n}))},changePersonName:function(e,t){var n=t.payload,c=n.id,a=n.name,s=m(c,e);null!=s&&(s.name=a)},toggleDrinksAlcohol:function(e,t){var n=m(t.payload.id,e);null!=n&&(n.drinksAlcohol=!n.drinksAlcohol)},toggleEatMeat:function(e,t){var n=m(t.payload.id,e);null!=n&&(n.eatMeat=!n.eatMeat)},changeSpendingAmount:function(e,t){var n=t.payload,c=n.id,a=n.amount,s=h(c,e);null!=s&&(s.amount=a)},changeSpendingType:function(e,t){var n=t.payload,c=n.id,a=n.type,s=h(c,e);null!=s&&(s.type=a)},addPayments:function(e,t){var n=t.payload.data,c=e.payments;if(n){for(;c.length>0;)c.pop();var a,s=Object(j.a)(n);try{for(s.s();!(a=s.n()).done;){var r=a.value;c.push(r)}}catch(i){s.e(i)}finally{s.f()}}}}});function m(e,t){var n,c=Object(j.a)(t.groups);try{for(c.s();!(n=c.n()).done;){var a,s=n.value,r=Object(j.a)(s.persons);try{for(r.s();!(a=r.n()).done;){var i=a.value;if(i.id===e)return i}}catch(o){r.e(o)}finally{r.f()}}}catch(o){c.e(o)}finally{c.f()}return null}function h(e,t){var n,c=Object(j.a)(t.groups);try{for(c.s();!(n=c.n()).done;){var a,s=n.value,r=Object(j.a)(s.spendings);try{for(r.s();!(a=r.n()).done;){var i=a.value;if(i.id===e)return i}}catch(o){r.e(o)}finally{r.f()}}}catch(o){c.e(o)}finally{c.f()}return null}var p=b.actions,f=p.addGroup,O=p.deleteGroup,x=p.addPerson,v=p.changePersonName,g=p.toggleDrinksAlcohol,y=p.toggleEatMeat,N=p.deletePerson,k=p.addSpending,w=p.changeSpendingAmount,C=p.changeSpendingType,S=p.deleteSpending,A=p.addPayments,M=n(17),P=n(18),T=n(77);function E(){var e=Object(c.useState)(!0),t=Object(l.a)(e,2),n=t[0],a=t[1],s=Object(d.c)((function(e){return e.storage.groups}));return Object(c.useEffect)((function(){s.length>0?a(!1):a(!0)}),[s]),n?Object(r.jsxs)("div",{className:"alert alert-primary d-flex alert-dismissible",role:"alert",children:[Object(r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",className:"bi bi-exclamation-triangle-fill flex-shrink-0 me-2",viewBox:"0 0 16 16",role:"img","aria-label":"Warning:",children:Object(r.jsx)("path",{d:"M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"})}),Object(r.jsx)("div",{children:Object(r.jsxs)("ul",{children:[Object(r.jsx)("li",{children:"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u043a\u0430\u043a \u043c\u0438\u043d\u0438\u043c\u0443\u043c \u0434\u0432\u0435 \u0433\u0440\u0443\u043f\u043f\u044b \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432"}),Object(r.jsx)("li",{children:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0442\u0440\u0430\u0442\u044b \u0438 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432"}),Object(r.jsx)("li",{children:"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \xab\u041f\u043e\u0441\u0447\u0438\u0442\u0430\u0442\u044c\xbb \u0438 \u0443\u0437\u043d\u0430\u0439\u0442\u0435 \u043a\u0442\u043e \u043a\u043e\u043c\u0443 \u0438 \u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0434\u043e\u043b\u0436\u0435\u043d"})]})}),Object(r.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"})]}):Object(r.jsx)("div",{})}function L(){var e=Object(d.c)((function(e){return e.storage.groups})),t=Object(c.useState)(!1),n=Object(l.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(""),o=Object(l.a)(i,2),j=o[0],b=o[1],m=Object(c.useState)("empty"),h=Object(l.a)(m,2),p=h[0],O=h[1],x=Object(d.b)();var v=function(){return s(!1)};return Object(r.jsxs)("div",{className:"container-md",children:[Object(r.jsx)(E,{}),Object(r.jsx)("div",{className:"row row-cols-1",children:e.map((function(e,t){return Object(r.jsx)(z,{name:e.name,id:e.id,persons:e.persons,spendings:e.spendings},e.id)}))}),Object(r.jsxs)("div",{className:"row row-cols-1",children:[Object(r.jsx)("div",{className:"col mb-2",children:Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("button",{type:"button",className:"btn btn-success btn-lg",onClick:function(){return s(!0)},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u0443"})})}),Object(r.jsx)(F,{})]}),Object(r.jsx)(J,{}),Object(r.jsxs)(T.a,{show:a,onHide:v,children:[Object(r.jsx)(T.a.Header,{closeButton:!0,children:Object(r.jsx)(T.a.Title,{children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u0433\u0440\u0443\u043f\u043f\u0443"})}),Object(r.jsx)(T.a.Body,{children:Object(r.jsxs)("div",{className:"row justify-content-center",children:[Object(r.jsx)("div",{className:"col-1"}),Object(r.jsx)("div",{className:"col-auto",children:Object(r.jsx)("input",{className:"empty"===p?"form-control form-control-lg":"form-control form-control-lg is-invalid",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",value:j,onChange:function(e){b(e.target.value)}})}),Object(r.jsx)("div",{className:"col-1"})]})}),Object(r.jsxs)(T.a.Footer,{children:[Object(r.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:v,children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"}),Object(r.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){j.length>=3?(x(f({id:Object(u.c)(),name:j,persons:[],spendings:[]})),O("empty"),b(""),s(!1)):(O("error"),setTimeout((function(){O("empty")}),2e3))},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})]})]})}function z(e){var t=e.id,n=e.name,c=e.persons,a=e.spendings,s=Object(d.b)();return Object(r.jsxs)("div",{className:"col mb-2",children:[Object(r.jsx)("div",{className:"row",children:Object(r.jsxs)("p",{className:"h3",children:[n,Object(r.jsx)("button",{type:"button",className:"btn-close btn-sm",onClick:function(){s(O({id:t}))}})]})}),Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col",children:Object(r.jsxs)("p",{className:"h6",children:["\u0423\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0438 ",Object(r.jsx)(M.a,{icon:P.b,color:"green",onClick:function(){s(x({id:t}))}})]})})}),Object(r.jsx)("div",{className:"row justify-content-center",children:c?c.map((function(e,t){return Object(r.jsx)(B,{name:e.name,drinksAlcohol:e.drinksAlcohol,eatMeat:e.eatMeat,id:e.id},e.id)})):""}),Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col",children:Object(r.jsxs)("p",{className:"h6",children:["\u0422\u0440\u0430\u0442\u044b ",Object(r.jsx)(M.a,{icon:P.b,color:"green",onClick:function(){s(k({id:t}))}})]})})}),Object(r.jsx)("div",{className:"row justify-content-center",children:a?a.map((function(e,t){return Object(r.jsx)(G,{amount:e.amount,type:e.type,id:e.id},e.id)})):""})]})}function B(e){var t=e.id,n=e.name,c=e.eatMeat,a=e.drinksAlcohol,s=Object(d.b)();return Object(r.jsxs)("div",{className:"row mb-1",style:{position:"relative"},children:[Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("div",{className:"col-md-12 col-lg-6",children:Object(r.jsxs)("div",{className:"input-group flex-nowrap",children:[Object(r.jsx)("span",{className:"input-group-text",id:"name",children:Object(r.jsx)("i",{className:"bi bi-person-circle"})}),Object(r.jsx)("input",{type:"text",className:"form-control",placeholder:"\u0418\u043c\u044f",value:n,onChange:function(e){s(v({id:t,name:e.target.value}))}})]})}),Object(r.jsxs)("div",{className:"col-md-12 col-lg-6",style:{position:"relative"},children:[Object(r.jsxs)("div",{className:"form-check form-check-inline",children:[Object(r.jsx)("input",{className:"form-check-input",type:"checkbox",id:t+":alcoholCheckbox",checked:a,onChange:function(){s(g({id:t}))}}),Object(r.jsx)("label",{className:"form-check-label",htmlFor:t+":alcoholCheckbox",children:"\u0410\u043b\u043a\u043e\u0433\u043e\u043b\u044c"})]}),Object(r.jsxs)("div",{className:"form-check form-check-inline",children:[Object(r.jsx)("input",{className:"form-check-input",type:"checkbox",id:t+":meatCheckbox",checked:c,onChange:function(){s(y({id:t}))}}),Object(r.jsx)("label",{className:"form-check-label",htmlFor:t+":meatCheckbox",children:"\u041c\u044f\u0441\u043e"})]})]})]}),Object(r.jsx)("button",{type:"button",className:"btn-close btn-sm",style:{position:"absolute",right:"3%",top:"50%",transform:"translate(-3%, -50%)"},onClick:function(){s(N({id:t}))}})]})}function G(e){var t=e.id,n=e.amount,c=e.type,a=Object(d.b)();return Object(r.jsx)("div",{className:"row",style:{marginTop:5},children:Object(r.jsxs)("div",{className:"input-group flex-nowrap",children:[Object(r.jsx)("input",{type:"number",className:"form-control",placeholder:"\u0421\u0443\u043c\u043c\u0430",value:n,onChange:function(e){a(w({id:t,amount:e.target.value}))}}),Object(r.jsxs)("select",{className:"form-select",value:c,onChange:function(e){a(C({id:t,type:e.target.value}))},children:[Object(r.jsx)("option",{value:"other",children:"\u0414\u0440\u0443\u0433\u043e\u0435"}),Object(r.jsx)("option",{value:"alcohol",children:"\u0410\u043b\u043a\u043e\u0433\u043e\u043b\u044c"}),Object(r.jsx)("option",{value:"meat",children:"\u041c\u044f\u0441\u043e"})]}),Object(r.jsxs)("span",{className:"input-group-text",children:[" ",Object(r.jsx)("button",{type:"button",className:"btn-close btn-sm",onClick:function(){a(S({id:t}))}})]})]})})}function F(){var e=Object(d.c)((function(e){return e.storage.groups})),t=Object(c.useState)(!1),n=Object(l.a)(t,2),a=n[0],s=n[1],i=Object(d.b)();return Object(c.useEffect)((function(){e.length>=2&&s(!0)}),[e]),a?Object(r.jsx)("div",{className:"col mb-2",children:Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("button",{type:"button",className:"btn btn-success btn-lg",onClick:function(){fetch("/calculator/calculate-spendings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({eventName:"event",participants:e})}).then((function(e){if(e.ok)return e.json();console.error("error")})).then((function(e){i(A({data:e.payments}))})).catch((function(e){console.error(e)}))},children:"\u041f\u043e\u0441\u0447\u0438\u0442\u0430\u0442\u044c"})})}):Object(r.jsx)("div",{className:"col mb-2",children:Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("button",{type:"button",className:"btn btn-success btn-lg",disabled:!0,children:"\u041f\u043e\u0441\u0447\u0438\u0442\u0430\u0442\u044c"})})})}function J(){var e=Object(c.useState)(!1),t=Object(l.a)(e,2),n=t[0],a=t[1],s=Object(d.c)((function(e){return e.storage.payments}));return Object(c.useEffect)((function(){a(!!s)}),[s]),n?Object(r.jsx)("div",{className:"container",style:{marginTop:20},children:Object(r.jsx)("div",{className:"row",children:s.map((function(e,t){return Object(r.jsx)(D,{payer:e.payer,amount:e.amount,recepient:e.recepient})}))})}):Object(r.jsx)("div",{})}function D(e){return Object(r.jsx)("div",{className:"row align-content-center",children:Object(r.jsx)("div",{className:"col-md-12 justify-content-center",children:Object(r.jsxs)("p",{className:"h5 text-center",children:[e.payer,Object(r.jsx)(M.a,{icon:P.a,style:{marginLeft:30,marginRight:30}})," ",e.amount,Object(r.jsx)(M.a,{icon:P.c,size:"xs"})," ",Object(r.jsx)(M.a,{icon:P.a,style:{marginLeft:30,marginRight:30}}),e.recepient]})})})}function H(){var e=[{path:"/",element:Object(r.jsx)(R,{}),children:[{index:!0,element:Object(r.jsx)(L,{})}]}],t=Object(o.g)(e);return Object(r.jsx)("div",{children:t})}function R(){return Object(r.jsxs)("div",{className:"col-lg-8 mx-auto",children:[Object(r.jsx)(i,{}),Object(r.jsx)(o.a,{})]})}n(51),n(52),n(73);var I=n(27),W=Object(u.a)({reducer:{storage:b.reducer}});s.a.render(Object(r.jsx)(d.a,{store:W,children:Object(r.jsx)(I.a,{children:Object(r.jsx)(H,{})})}),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.18773b10.chunk.js.map